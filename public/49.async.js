(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{CNVm:function(e,t,a){"use strict";var l=a("4Gf+"),r=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("K1xq");var d=l(a("lmRu"));a("U7p0");var n=l(a("pXLU"));a("t0lF");var u=l(a("kDCt"));a("baa/");var s=l(a("6wzi"));a("Ljnx");var i=l(a("EfNK")),o=l(a("RSNA"));a("BrD1");var c=l(a("SpN2"));a("ZkGU");var f=l(a("zOAu")),m=l(a("OjS7"));a("mXkF");var p=l(a("J7Y1")),h=l(a("jx1L")),v=l(a("pvd2")),E=l(a("RPUv")),y=l(a("1KPh")),g=l(a("ZA+g"));a("1EyM");var b=l(a("VEhp"));a("VfK5");var S=l(a("LcI5"));a("K5T9");var w,C,k,x=l(a("xn9m")),L=r(a("4G06")),N=a("LneV"),R=l(a("zHco")),M=l(a("CkN6")),I=a("+n12"),V=l(a("uCNL")),K=x.default.Item,D=S.default.Group,F=b.default.Search,O=(w=(0,N.connect)(function(e){var t=e.api,a=e.loading;return{api:t,loading:a.models.api}}),C=x.default.create(),w(k=C(k=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,r=new Array(l),d=0;d<l;d++)r[d]=arguments[d];return a=(0,E.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(r))),a.state={visible:!1,selectedRows:[],isEdit:!1,current:{},search:{},params:{orderBy:"id",sortedBy:"desc",search:""}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.columns=[{title:"\u8d26\u53f7",dataIndex:"name"},{title:"\u90ae\u7bb1",dataIndex:"email",align:"left"},{title:"\u72b6\u6001",dataIndex:"status",align:"left",filters:[{text:"\u6b63\u5e38",value:1},{text:"\u7981\u7528",value:0}],filterMultiple:!1,render:function(e){return 1===e?L.default.createElement(p.default,{color:"#87d068"},"\u6b63\u5e38"):L.default.createElement(p.default,{color:"#f50"},"\u7981\u7528")}},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"created_at",align:"left"},{title:"\u64cd\u4f5c",render:function(e,t){return L.default.createElement(L.Fragment,null,L.default.createElement("a",{onClick:function(e){e.preventDefault(),a.showEditModal(t)}},"\u7f16\u8f91"))}}],a.showModal=function(){a.setState({visible:!0,current:void 0,isEdit:!1})},a.showEditModal=function(e){a.setState({visible:!0,current:e,isEdit:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form,d=a.state.current,n=d?d.id:void 0;a.setState({visible:!1}),r.validateFields(function(e,t){e||l({type:"api/submit",payload:{apiname:"user",id:n,params:(0,m.default)({},t)},callback:function(e){return 1001===e.code?f.default.success(e.message):f.default.error(e.message)}})})},a.onSearch=function(e){var t=a.props.dispatch,l=a.state,r=l.search,d=l.params,n=(0,m.default)({},r,{name:e}),u=(0,m.default)({},d,{search:(0,I.getSearchParams)(n)});t({type:"api/fetch",payload:{apiname:"user",params:u}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleStandardTableChange=function(e,t){var l=a.props.dispatch,r=a.state,d=r.search,n=r.params,u=(0,m.default)({},n,{page:e.current,limit:e.pageSize,searchJoin:"or"}),s=(0,m.default)({},d),i=t.status;void 0!==i&&(s=(0,m.default)({},s,{status:i[0]})),u=(0,m.default)({},u,{search:(0,I.getSearchParams)(s)}),a.setState({params:u,search:s}),l({type:"api/fetch",payload:{apiname:"user",params:u}})},a}return(0,g.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.state.params;e({type:"api/fetch",payload:{apiname:"user",params:t}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.api,l=t.loading,r=this.props.form.getFieldDecorator,f=this.state,m=f.selectedRows,p=f.visible,h=f.isEdit,v=f.current,E=void 0===v?{}:v,y=L.default.createElement(c.default,{onClick:this.handleMenuClick,selectedKeys:[]},L.default.createElement(c.default.Item,{key:"remove"},"\u5220\u9664"),L.default.createElement(c.default.Item,{key:"approval"},"\u6279\u91cf\u5ba1\u6279")),g={okText:"\u63d0\u4ea4",onOk:this.handleSubmit,onCancel:this.handleCancel},w=L.default.createElement("div",null,L.default.createElement(F,{className:V.default.extraContentSearch,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0\u641c\u7d22",onSearch:this.onSearch})),C=function(){return L.default.createElement(x.default,{onSubmit:e.handleSubmit},L.default.createElement(K,(0,o.default)({label:"\u8d26\u53f7"},e.formLayout),r("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u767b\u5f55\u8d26\u53f7"}],initialValue:E.name})(L.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"}))),L.default.createElement(K,(0,o.default)({label:"\u5bc6\u7801"},e.formLayout),r("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],initialValue:E.password?E.password:""})(L.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),L.default.createElement(K,(0,o.default)({label:"\u90ae\u7bb1"},e.formLayout),r("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}],initialValue:E.email?E.email:""})(L.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),L.default.createElement(K,(0,o.default)({label:"\u72b6\u6001"},e.formLayout),r("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u72b6\u6001"}],initialValue:E.status?E.status:1})(L.default.createElement(D,{name:"status"},L.default.createElement(S.default,{value:1},"\u6b63\u5e38"),L.default.createElement(S.default,{value:0},"\u7981\u7528")))))};return L.default.createElement(R.default,null,L.default.createElement("div",{className:V.default.standardList},L.default.createElement(n.default,{bordered:!1,title:"\u7528\u6237\u5217\u8868",style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:w},L.default.createElement("div",{className:V.default.tableList},L.default.createElement("div",{className:V.default.tableListOperator},m.length>0&&L.default.createElement("span",null,L.default.createElement(i.default,null,"\u6279\u91cf\u64cd\u4f5c"),L.default.createElement(u.default,{overlay:y},L.default.createElement(i.default,null,"\u66f4\u591a\u64cd\u4f5c ",L.default.createElement(s.default,{type:"down"}))))),L.default.createElement(i.default,{type:"dashed",style:{width:"100%",marginBottom:8,marginTop:8},icon:"plus",onClick:this.showModal},"\u6dfb\u52a0"),L.default.createElement(M.default,{selectedRows:m,loading:l,data:a,rowKey:"id",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))),L.default.createElement(d.default,(0,o.default)({title:h?"\u7f16\u8f91\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",className:V.default.standardListForm,width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,visible:p},g),C()))}}]),t}(L.PureComponent))||k)||k),P=O;t.default=P}}]);