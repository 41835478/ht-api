(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{xsIR:function(e,a,t){"use strict";var l=t("4Gf+"),r=t("GyWo");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("U7p0");var d=l(t("pXLU"));t("Ljnx");var n=l(t("EfNK"));t("VfK5");var u=l(t("LcI5"));t("YvrW");var i=l(t("uG6z"));t("XW8r");var c=l(t("y+tk")),f=l(t("RSNA"));t("1EyM");var o=l(t("VEhp")),s=l(t("OjS7"));t("ZkGU");var m=l(t("zOAu")),p=l(t("jx1L")),h=l(t("pvd2")),v=l(t("RPUv")),E=l(t("1KPh")),b=l(t("ZA+g"));t("9RKC");var g=l(t("6RLy"));t("K5T9");var y,S,k,_=l(t("xn9m")),w=r(t("4G06")),V=t("LneV"),x=l(t("zHco")),C=l(t("CTfC")),G=t("+n12"),U=_.default.Item,J=g.default.Option,O=(y=(0,V.connect)(function(e){var a=e.api,t=e.loading;return{api:a,loading:t.models.api,submitting:t.effects["api/submit"]}}),S=_.default.create(),y(k=S(k=function(e){function a(e){var t;return(0,p.default)(this,a),t=(0,v.default)(this,(0,E.default)(a).call(this,e)),t.state={canSubmit:!1,inviter:[],levels:[],group:[],fetching:!1},t.fetchUser=function(e){var a=t.props.dispatch;a({type:"api/fetch",payload:{apiname:"member",params:{search:(0,G.getSearchParams)(e),searchJoin:"or"}},callback:function(e){1001===e.code?t.setState({inviter:e.data.data}):m.default.error("\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25")}})},t.fetchGroup=function(e){var a=t.props.dispatch;a({type:"api/fetch",payload:{apiname:"member/group",params:{search:(0,G.getSearchParams)(e),searchJoin:"or"}},callback:function(e){1001===e.code?t.setState({group:e.data.data}):m.default.error("\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25")}})},t.handleSubmit=function(e){var a=t.props,l=a.dispatch,r=a.form,d=a.match.params.id;e.preventDefault(),r.validateFieldsAndScroll(function(e,a){e||l({type:"api/submit",payload:{apiname:"member",id:d,params:(0,s.default)({},a)},callback:function(e){1001===e.code?m.default.success(e.message):m.default.error(e.message)}})})},t.lastFetchId=0,t.fetchUser=(0,C.default)(t.fetchUser,800),t}return(0,b.default)(a,e),(0,h.default)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.dispatch,l=a.match.params;void 0!==l.id&&t({type:"api/detail",payload:{apiname:"member",id:l.id},callback:function(a){1001===a.code?(m.default.success(a.message),t({type:"api/fetch",payload:{apiname:"member/level",params:{searchJoin:"or"}},callback:function(a){1001===a.code?e.setState({levels:a.data.data}):m.default.error("\u7b49\u7ea7\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25")}}),t({type:"api/fetch",payload:{apiname:"member",params:{search:"id:".concat(a.data.data.inviter_id),searchJoin:"or"}},callback:function(a){1001===a.code?e.setState({inviter:a.data.data}):m.default.error("\u4f1a\u5458\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25")}}),t({type:"api/fetch",payload:{apiname:"member/group",params:{search:"id:".concat(a.data.data.group_id,";id:").concat(a.data.data.oldgroup_id),searchJoin:"or"}},callback:function(a){1001===a.code?e.setState({group:a.data.data}):m.default.error("\u5c0f\u7ec4\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25")}}),e.setState({canSubmit:!0})):m.default.error(a.message)}})}},{key:"render",value:function(){var e=this.state,a=e.fetching,t=e.inviter,l=e.levels,r=e.group,s=e.canSubmit,m=this.props,p=m.form.getFieldDecorator,h=m.api.detail,v=m.submitting,E={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},b={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return w.default.createElement(x.default,null,w.default.createElement(d.default,{bordered:!1},w.default.createElement(_.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},w.default.createElement(U,(0,f.default)({},E,{label:"\u6635\u79f0"}),p("nickname",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:h.nickname})(w.default.createElement(o.default,{placeholder:"\u6635\u79f0"}))),w.default.createElement(U,(0,f.default)({},E,{label:"\u771f\u5b9e\u59d3\u540d"}),p("realname",{initialValue:h.realname})(w.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u771f\u5b9e\u59d3\u540d"}))),w.default.createElement(U,(0,f.default)({},E,{label:"\u652f\u4ed8\u5b9d"}),p("alipay",{initialValue:h.alipay})(w.default.createElement(o.default,null))),w.default.createElement(U,(0,f.default)({},E,{label:"\u5bc6\u7801"}),p("password",{initialValue:""})(w.default.createElement(o.default,{placeholder:"\u4e0d\u586b\u5199\u5219\u4e0d\u66f4\u65b0"}))),w.default.createElement(U,(0,f.default)({},E,{label:"\u624b\u673a\u53f7"}),p("phone",{initialValue:h.phone})(w.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),w.default.createElement(U,(0,f.default)({},E,{label:"\u9080\u8bf7\u4eba"}),w.default.createElement("div",null,p("inviter_id",{initialValue:null!==h.inviter_id?h.inviter_id:""})(w.default.createElement(g.default,{showSearch:!0,placeholder:"\u8f93\u5165\u6635\u79f0\u5173\u952e\u8bcd\u641c\u7d22",notFoundContent:a?w.default.createElement(c.default,{size:"small"}):null,filterOption:!1,onSearch:this.fetchUser,style:{width:"100%"}},t.map(function(e){return w.default.createElement(J,{key:e.id,value:e.id},e.nickname)}))))),w.default.createElement(U,(0,f.default)({},E,{label:"\u7b49\u7ea7"}),w.default.createElement("div",null,p("level_id",{initialValue:null!==h.level_id?h.level_id:""})(w.default.createElement(g.default,{style:{width:"100%"}},l.map(function(e){return w.default.createElement(J,{key:e.id,value:e.id},e.name)}))))),w.default.createElement(U,(0,f.default)({},E,{label:"\u5f53\u524d\u7ec4"}),w.default.createElement("div",null,p("group_id",{initialValue:null!==h.group_id?h.group_id:""})(w.default.createElement(g.default,{showSearch:!0,placeholder:"\u8f93\u5165\u5c0f\u7ec4\u5173\u952e\u8bcd\u641c\u7d22",notFoundContent:a?w.default.createElement(c.default,{size:"small"}):null,filterOption:!1,onSearch:this.fetchGroup,style:{width:"100%"}},r.map(function(e){return w.default.createElement(J,{key:e.id,value:e.id},e.name)}))))),w.default.createElement(U,(0,f.default)({},E,{label:"\u539f\u6709\u7ec4"}),w.default.createElement("div",null,p("oldgroup_id",{initialValue:null!==h.oldgroup_id?h.oldgroup_id:""})(w.default.createElement(g.default,{showSearch:!0,placeholder:"\u8f93\u5165\u5c0f\u7ec4\u5173\u952e\u8bcd\u641c\u7d22",notFoundContent:a?w.default.createElement(c.default,{size:"small"}):null,filterOption:!1,onSearch:this.fetchGroup,style:{width:"100%"}},r.map(function(e){return w.default.createElement(J,{key:e.id,value:e.id},e.name)}))))),w.default.createElement(U,(0,f.default)({},E,{label:"\u4f59\u989d"}),p("credit1",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:h.credit1})(w.default.createElement(i.default,{min:1,max:99999999,formatter:function(e){return"".concat(e,"\u5143")}}))),w.default.createElement(U,(0,f.default)({},E,{label:"\u79ef\u5206"}),p("credit2",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:h.credit2})(w.default.createElement(i.default,{min:1,max:99999999}))),w.default.createElement(U,(0,f.default)({},E,{label:"\u6210\u957f\u503c"}),p("credit3",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:h.credit3})(w.default.createElement(i.default,{min:1,max:99999999,formatter:function(e){return"".concat(e)}}))),w.default.createElement(U,(0,f.default)({},E,{label:"\u4f1a\u5458\u72b6\u6001"}),w.default.createElement("div",null,p("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}],initialValue:h.status?h.status:1})(w.default.createElement(u.default.Group,null,w.default.createElement(u.default,{value:1},"\u6b63\u5e38"),w.default.createElement(u.default,{value:0},"\u7981\u7528"))))),w.default.createElement(U,(0,f.default)({},b,{style:{marginTop:32}}),w.default.createElement(n.default,{type:"primary",htmlType:"submit",loading:v,disabled:!s},"\u63d0\u4ea4")))))}}]),a}(w.PureComponent))||k)||k),q=O;a.default=q}}]);