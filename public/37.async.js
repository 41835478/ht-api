(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{JhxQ:function(e,t,a){e.exports={tableList:"antd-pro-pages-taoke-haohuo-list-tableList",tableListOperator:"antd-pro-pages-taoke-haohuo-list-tableListOperator",standardList:"antd-pro-pages-taoke-haohuo-list-standardList",headerInfo:"antd-pro-pages-taoke-haohuo-list-headerInfo",listContent:"antd-pro-pages-taoke-haohuo-list-listContent",listContentItem:"antd-pro-pages-taoke-haohuo-list-listContentItem",extraContentSearch:"antd-pro-pages-taoke-haohuo-list-extraContentSearch",listCard:"antd-pro-pages-taoke-haohuo-list-listCard",standardListForm:"antd-pro-pages-taoke-haohuo-list-standardListForm",formResult:"antd-pro-pages-taoke-haohuo-list-formResult"}},dK2k:function(e,t,a){"use strict";var l=a("4Gf+"),r=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("U7p0");var n=l(a("pXLU"));a("t0lF");var d=l(a("kDCt"));a("Ljnx");var s=l(a("EfNK"));a("Xe2/");var o=l(a("PRXz"));a("YvrW");var i=l(a("uG6z")),u=l(a("RSNA"));a("baa/");var c=l(a("6wzi"));a("BrD1");var f=l(a("SpN2"));a("K1xq");var m=l(a("lmRu"));a("ZkGU");var p=l(a("zOAu")),h=l(a("OjS7"));a("I9VT");var v=l(a("OsYg"));a("3wa/");var g=l(a("lJUX")),y=l(a("jx1L")),E=l(a("pvd2")),b=l(a("RPUv")),k=l(a("1KPh")),S=l(a("ZA+g"));a("1EyM");var C=l(a("VEhp"));a("K5T9");var w,x,L,_=l(a("xn9m")),Y=r(a("4G06")),I=a("LneV"),M=l(a("zHco")),R=l(a("CkN6")),D=a("+n12"),U=l(a("I9Uw")),T=l(a("JhxQ")),N=_.default.Item,O=C.default.Search,F=C.default.TextArea,V="YYYY-MM-DD HH:mm:ss",P=(w=(0,I.connect)(function(e){var t=e.api,a=e.loading;return{api:t,loading:a.models.api}}),x=_.default.create(),w(L=x(L=function(e){function t(){var e,a;(0,y.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,b.default)(this,(e=(0,k.default)(t)).call.apply(e,[this].concat(r))),a.state={visible:!1,selectedRows:[],isEdit:!1,current:{},uploading:!1,start_time:void 0,end_time:void 0,search:{},params:{orderBy:"id",sortedBy:"desc",search:""}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.columns=[{title:"\u6807\u9898",render:function(e){return Y.default.createElement(Y.Fragment,null,Y.default.createElement(g.default,{shape:"square",style:{marginRight:"5px"},src:e.app_hot_image}),Y.default.createElement("span",null,e.title))}},{title:"\u5206\u4eab\u6b21\u6570",dataIndex:"shares",align:"left"},{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"end_time",align:"left"},{title:"\u64cd\u4f5c",render:function(e,t){return Y.default.createElement(Y.Fragment,null,Y.default.createElement("a",{onClick:function(e){e.preventDefault(),a.showEditModal(t)}},"\u7f16\u8f91"),Y.default.createElement(v.default,{type:"vertical"}),Y.default.createElement("a",{style:{color:"#c92c2c"},onClick:function(e){e.preventDefault(),a.deleteItem(t)}},"\u5220\u9664"))}}],a.showModal=function(){a.setState({visible:!0,current:void 0,isEdit:!1,imageUrl:void 0})},a.showEditModal=function(e){a.setState({visible:!0,current:e,imageUrl:e.thumb,isEdit:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form,n=a.state,d=n.current,s=n.imageUrl,o=d?d.id:void 0;a.setState({visible:!1}),r.setFieldsValue({thumb:s}),r.validateFields(function(e,t){var r=a.state,n=r.start_time,d=r.end_time;e||l({type:"api/submit",payload:{apiname:"taoke/haohuo",id:o,params:(0,h.default)({},t,{start_time:n,end_time:d})},callback:function(e){return 1001===e.code?p.default.success(e.message):p.default.error(e.message)}})})},a.deleteItem=function(e){var t=a.props.dispatch;m.default.confirm({title:"\u5220\u9664",content:"\u786e\u5b9a\u5220\u9664\u8be5\u6761\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"api/submit",payload:{apiname:"taoke/haohuo",id:e.id},callback:function(e){return 1001===e.code?p.default.success(e.message):p.default.error(e.message)}})}})},a.onSearch=function(e){var t=a.props.dispatch,l=a.state,r=l.search,n=l.params,d=(0,h.default)({},r,{name:e}),s=(0,h.default)({},n,{search:(0,D.getSearchParams)(d)});t({type:"api/fetch",payload:{apiname:"taoke/haohuo",params:s}})},a.beforeUpload=function(e){var t="image/jpeg"===e.type;t||p.default.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||p.default.error("Image must smaller than 2MB!"),t&&a},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&a.setState({imageUrl:e.fileList[0].response.data.url,uploading:!1}):a.setState({uploading:!0})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,n=a.state,d=n.search,s=n.params,o=(0,h.default)({},s,{page:e.current,limit:e.pageSize,searchJoin:"and"}),i=(0,h.default)({},d),u=l.field,c=l.order;void 0!==u&&void 0!==c&&(o=(0,h.default)({},o,{orderBy:u,sortedBy:"descend"===c?"desc":"asc"}));var f=t.type,m=t.status;void 0!==f&&(i=(0,h.default)({},i,{type:f[0]})),void 0!==m&&(i=(0,h.default)({},i,{status:m[0]})),o=(0,h.default)({},o,{search:(0,D.getSearchParams)(i)}),a.setState({params:o,search:i}),console.log(o,i),r({type:"api/fetch",payload:{apiname:"taoke/haohuo",params:o}})},a}return(0,S.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.state.params;e({type:"api/fetch",payload:{apiname:"taoke/haohuo",params:t},callback:function(e){1001===e.code?p.default.success(e.message):p.default.error(e.message)}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.api,l=t.loading,r=this.props.form.getFieldDecorator,p=this.state,h=p.selectedRows,v=p.visible,g=p.isEdit,y=p.current,E=void 0===y?{}:y,b=Y.default.createElement(f.default,{onClick:this.handleMenuClick,selectedKeys:[]},Y.default.createElement(f.default.Item,{key:"remove"},"\u5220\u9664"),Y.default.createElement(f.default.Item,{key:"approval"},"\u6279\u91cf\u5ba1\u6279")),k={okText:"\u63d0\u4ea4",onOk:this.handleSubmit,onCancel:this.handleCancel},S=Y.default.createElement("div",null,Y.default.createElement(O,{className:T.default.extraContentSearch,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898\u641c\u7d22",onSearch:this.onSearch})),w=function(){var t=e.state,a=(t.imageUrl,t.uploading);Y.default.createElement("div",null,Y.default.createElement(c.default,{type:a?"loading":"plus"}),Y.default.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20"));return Y.default.createElement(_.default,{onSubmit:e.handleSubmit},Y.default.createElement(N,(0,u.default)({label:"\u6807\u9898"},e.formLayout),r("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:E.title})(Y.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),Y.default.createElement(N,(0,u.default)({label:"\u4ecb\u7ecd\u6587\u6848"},e.formLayout),r("text",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:E.text})(Y.default.createElement(F,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u4ecb\u7ecd\u6587\u6848"}))),Y.default.createElement(N,(0,u.default)({label:"\u5206\u4eab\u6b21\u6570"},e.formLayout),r("shares",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:E.shares})(Y.default.createElement(i.default,{min:0,max:1e4,formatter:function(e){return"".concat(e," \u6b21")}}))),Y.default.createElement(N,(0,u.default)({label:"\u5f00\u59cb\u65f6\u95f4"},e.formLayout),r("start_time",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4"}],initialValue:E.start_time?(0,U.default)(E.start_time,V):""})(Y.default.createElement(o.default,{format:"YYYY-MM-DD HH:mm:ss",showTime:!0,placeholder:"\u8bf7\u9009\u62e9\u5f00\u59cb\u65f6\u95f4",onChange:function(t,a){e.setState({start_time:a})}}))),Y.default.createElement(N,(0,u.default)({label:"\u7ed3\u675f\u65f6\u95f4"},e.formLayout),r("end_time",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4"}],initialValue:E.end_time?(0,U.default)(E.end_time,V):""})(Y.default.createElement(o.default,{format:"YYYY-MM-DD HH:mm:ss",showTime:!0,placeholder:"\u8bf7\u9009\u62e9\u7ed3\u675f\u65f6\u95f4",onChange:function(t,a){e.setState({end_time:a})}}))))};return Y.default.createElement(M.default,null,Y.default.createElement("div",{className:T.default.standardList},Y.default.createElement(n.default,{bordered:!1,title:"\u597d\u8d27\u5217\u8868",style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:S},Y.default.createElement("div",{className:T.default.tableList},Y.default.createElement("div",{className:T.default.tableListOperator},h.length>0&&Y.default.createElement("span",null,Y.default.createElement(s.default,null,"\u6279\u91cf\u64cd\u4f5c"),Y.default.createElement(d.default,{overlay:b},Y.default.createElement(s.default,null,"\u66f4\u591a\u64cd\u4f5c ",Y.default.createElement(c.default,{type:"down"}))))),Y.default.createElement(R.default,{selectedRows:h,loading:l,data:a,rowKey:"id",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))),Y.default.createElement(m.default,(0,u.default)({title:g?"\u7f16\u8f91\u597d\u8d27":"\u6dfb\u52a0\u597d\u8d27",className:T.default.standardListForm,width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,visible:v},k),w()))}}]),t}(Y.PureComponent))||L)||L),q=P;t.default=q}}]);