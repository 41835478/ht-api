(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{Q11w:function(e,t,a){"use strict";var l=a("4Gf+"),n=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("U7p0");var r=l(a("pXLU"));a("t0lF");var d=l(a("kDCt"));a("baa/");var s=l(a("6wzi"));a("Ljnx");var i=l(a("EfNK"));a("Xe2/");var u=l(a("PRXz")),o=l(a("RSNA"));a("BrD1");var c=l(a("SpN2"));a("K1xq");var f=l(a("lmRu"));a("ZkGU");var m=l(a("zOAu")),p=l(a("OjS7"));a("I9VT");var h=l(a("OsYg"));a("3wa/");var v=l(a("lJUX")),g=l(a("jx1L")),y=l(a("pvd2")),E=l(a("RPUv")),b=l(a("1KPh")),k=l(a("ZA+g"));a("1EyM");var S=l(a("VEhp"));a("VfK5");var w=l(a("LcI5"));a("K5T9");var C,L,z,x=l(a("xn9m")),_=n(a("4G06")),Y=a("LneV"),I=l(a("zHco")),M=l(a("CkN6")),R=a("+n12"),D=l(a("I9Uw")),T=l(a("Yfxw")),O=x.default.Item,F=(w.default.Group,S.default.Search),N=S.default.TextArea,P="YYYY-MM-DD HH:mm:ss",U=(C=(0,Y.connect)(function(e){var t=e.api,a=e.loading;return{api:t,loading:a.models.api}}),L=x.default.create(),C(z=L(z=function(e){function t(){var e,a;(0,g.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,E.default)(this,(e=(0,b.default)(t)).call.apply(e,[this].concat(n))),a.state={visible:!1,selectedRows:[],isEdit:!1,current:{},uploading:!1,start_time:void 0,end_time:void 0,search:{},params:{orderBy:"id",sortedBy:"desc",search:""}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.columns=[{title:"\u6807\u9898",render:function(e){return _.default.createElement(_.Fragment,null,_.default.createElement(v.default,{shape:"square",style:{marginRight:"5px"},src:e.banner}),_.default.createElement("span",null,e.title))}},{title:"\u4e3b\u56fe",render:function(e){return _.default.createElement(_.Fragment,null,_.default.createElement(v.default,{shape:"square",style:{width:100},src:e.thumb}))}},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"start_time",align:"left"},{title:"\u64cd\u4f5c",render:function(e,t){return _.default.createElement(_.Fragment,null,_.default.createElement("a",{onClick:function(e){e.preventDefault(),a.showEditModal(t)}},"\u7f16\u8f91"),_.default.createElement(h.default,{type:"vertical"}),_.default.createElement("a",{style:{color:"#c92c2c"},onClick:function(e){e.preventDefault(),a.deleteItem(t)}},"\u5220\u9664"))}}],a.showModal=function(){a.setState({visible:!0,current:void 0,isEdit:!1})},a.showEditModal=function(e){a.setState({visible:!0,current:e,isEdit:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.form,r=a.state.current,d=r?r.id:void 0;a.setState({visible:!1}),n.validateFields(function(e,t){var n=a.state,r=n.start_time,s=n.end_time;e||l({type:"api/submit",payload:{apiname:"taoke/zhuanti",id:d,params:(0,p.default)({},t,{start_time:r,end_time:s})},callback:function(e){return 1001===e.code?m.default.success(e.message):m.default.error(e.message)}})})},a.deleteItem=function(e){var t=a.props.dispatch;f.default.confirm({title:"\u5220\u9664",content:"\u786e\u5b9a\u5220\u9664\u8be5\u6761\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"api/submit",payload:{apiname:"taoke/zhuanti",id:e.id},callback:function(e){return 1001===e.code?m.default.success(e.message):m.default.error(e.message)}})}})},a.onSearch=function(e){var t=a.props.dispatch,l=a.state,n=l.search,r=l.params,d=(0,p.default)({},n,{name:e}),s=(0,p.default)({},r,{search:(0,R.getSearchParams)(d)});t({type:"api/fetch",payload:{apiname:"taoke/zhuanti",params:s}})},a.beforeUpload=function(e){var t="image/jpeg"===e.type;t||m.default.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||m.default.error("Image must smaller than 2MB!"),t&&a},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&a.setState({imageUrl:e.fileList[0].response.data.url,uploading:!1}):a.setState({uploading:!0})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,r=a.state,d=r.search,s=r.params,i=(0,p.default)({},s,{page:e.current,limit:e.pageSize,searchJoin:"and"}),u=(0,p.default)({},d),o=l.field,c=l.order;void 0!==o&&void 0!==c&&(i=(0,p.default)({},i,{orderBy:o,sortedBy:"descend"===c?"desc":"asc"}));var f=t.type,m=t.status;void 0!==f&&(u=(0,p.default)({},u,{type:f[0]})),void 0!==m&&(u=(0,p.default)({},u,{status:m[0]})),i=(0,p.default)({},i,{search:(0,R.getSearchParams)(u)}),a.setState({params:i,search:u}),console.log(i,u),n({type:"api/fetch",payload:{apiname:"taoke/zhuanti",params:i}})},a}return(0,k.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.state.params;e({type:"api/fetch",payload:{apiname:"taoke/zhuanti",params:t},callback:function(e){1001===e.code?m.default.success(e.message):m.default.error(e.message)}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.api,l=t.loading,n=this.props.form.getFieldDecorator,m=this.state,p=m.selectedRows,h=m.visible,v=m.isEdit,g=m.current,y=void 0===g?{}:g,E=_.default.createElement(c.default,{onClick:this.handleMenuClick,selectedKeys:[]},_.default.createElement(c.default.Item,{key:"remove"},"\u5220\u9664"),_.default.createElement(c.default.Item,{key:"approval"},"\u6279\u91cf\u5ba1\u6279")),b={okText:"\u63d0\u4ea4",onOk:this.handleSubmit,onCancel:this.handleCancel},k=(_.default.createElement("div",null,_.default.createElement(F,{className:T.default.extraContentSearch,placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u641c\u7d22",onSearch:this.onSearch})),function(){return _.default.createElement(x.default,{onSubmit:e.handleSubmit},_.default.createElement(O,(0,o.default)({label:"\u6807\u9898"},e.formLayout),n("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:y.title})(_.default.createElement(S.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),_.default.createElement(O,(0,o.default)({label:"\u4ecb\u7ecd\u6587\u6848"},e.formLayout),n("content",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:y.content})(_.default.createElement(N,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u4ecb\u7ecd\u6587\u6848"}))),_.default.createElement(O,(0,o.default)({label:"\u5f00\u59cb\u65f6\u95f4"},e.formLayout),n("start_time",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4"}],initialValue:y.start_time?(0,D.default)(y.start_time,P):""})(_.default.createElement(u.default,{format:"YYYY-MM-DD HH:mm:ss",showTime:!0,placeholder:"\u8bf7\u9009\u62e9\u5f00\u59cb\u65f6\u95f4",onChange:function(t,a){e.setState({start_time:a})}}))),_.default.createElement(O,(0,o.default)({label:"\u7ed3\u675f\u65f6\u95f4"},e.formLayout),n("end_time",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4"}],initialValue:y.end_time?(0,D.default)(y.end_time,P):""})(_.default.createElement(u.default,{format:"YYYY-MM-DD HH:mm:ss",showTime:!0,placeholder:"\u8bf7\u9009\u62e9\u7ed3\u675f\u65f6\u95f4",onChange:function(t,a){e.setState({end_time:a})}}))))});return _.default.createElement(I.default,null,_.default.createElement("div",{className:T.default.standardList},_.default.createElement(r.default,{bordered:!1,title:"\u4e13\u9898\u5217\u8868",style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"}},_.default.createElement("div",{className:T.default.tableList},_.default.createElement("div",{className:T.default.tableListOperator},p.length>0&&_.default.createElement("span",null,_.default.createElement(i.default,null,"\u6279\u91cf\u64cd\u4f5c"),_.default.createElement(d.default,{overlay:E},_.default.createElement(i.default,null,"\u66f4\u591a\u64cd\u4f5c ",_.default.createElement(s.default,{type:"down"}))))),_.default.createElement(M.default,{selectedRows:p,loading:l,data:a,rowKey:"id",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))),_.default.createElement(f.default,(0,o.default)({title:v?"\u7f16\u8f91\u4e13\u9898":"\u6dfb\u52a0\u4e13\u9898",className:T.default.standardListForm,width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,visible:h},b),k()))}}]),t}(_.PureComponent))||z)||z),V=U;t.default=V},Yfxw:function(e,t,a){e.exports={tableList:"antd-pro-pages-taoke-zhuanti-list-tableList",tableListOperator:"antd-pro-pages-taoke-zhuanti-list-tableListOperator",standardList:"antd-pro-pages-taoke-zhuanti-list-standardList",headerInfo:"antd-pro-pages-taoke-zhuanti-list-headerInfo",listContent:"antd-pro-pages-taoke-zhuanti-list-listContent",listContentItem:"antd-pro-pages-taoke-zhuanti-list-listContentItem",extraContentSearch:"antd-pro-pages-taoke-zhuanti-list-extraContentSearch",listCard:"antd-pro-pages-taoke-zhuanti-list-listCard",standardListForm:"antd-pro-pages-taoke-zhuanti-list-standardListForm",formResult:"antd-pro-pages-taoke-zhuanti-list-formResult"}}}]);