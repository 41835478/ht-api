(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{"0Tog":function(e,a,t){"use strict";var l=t("4Gf+"),r=t("GyWo");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("U7p0");var n=l(t("pXLU"));t("t0lF");var d=l(t("kDCt"));t("Ljnx");var u=l(t("EfNK"));t("Odsp");var i=l(t("0LJ2")),s=l(t("RSNA"));t("YvrW");var o=l(t("uG6z"));t("baa/");var c=l(t("6wzi"));t("BrD1");var f=l(t("SpN2"));t("K1xq");var m=l(t("lmRu"));t("ZkGU");var p=l(t("zOAu")),h=l(t("OjS7"));t("I9VT");var v=l(t("OsYg"));t("mXkF");var g=l(t("J7Y1"));t("3wa/");var y=l(t("lJUX")),E=l(t("jx1L")),b=l(t("pvd2")),S=l(t("RPUv")),w=l(t("1KPh")),k=l(t("ZA+g"));t("9RKC");var C=l(t("6RLy"));t("1EyM");var x=l(t("VEhp"));t("VfK5");var L=l(t("LcI5"));t("K5T9");var U,R,I,N=l(t("xn9m")),M=r(t("4G06")),O=t("LneV"),K=l(t("zHco")),T=l(t("CkN6")),V=t("+n12"),F=l(t("KW/l")),z=N.default.Item,B=L.default.Group,D=x.default.Search,G=C.default.Option,J=(U=(0,O.connect)(function(e){var a=e.api,t=e.loading;return{api:a,loading:t.models.api}}),R=N.default.create(),U(I=R(I=function(e){function a(){var e,t;(0,E.default)(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=(0,S.default)(this,(e=(0,w.default)(a)).call.apply(e,[this].concat(r))),t.state={visible:!1,selectedRows:[],isEdit:!1,current:{},uploading:!1,search:{},params:{orderBy:"id",sortedBy:"desc",search:""}},t.formLayout={labelCol:{span:7},wrapperCol:{span:13}},t.columns=[{title:"\u56fe\u7247",render:function(e){return M.default.createElement(M.Fragment,null,M.default.createElement(y.default,{size:"small",shape:"square",style:{marginRight:"5px"},src:e.image}))}},{title:"\u6392\u5e8f",dataIndex:"sort",sorter:!0,align:"left"},{title:"\u6807\u8bc6",dataIndex:"tag",align:"left"},{title:"\u72b6\u6001",dataIndex:"status",align:"left",filters:[{text:"\u663e\u793a",value:1},{text:"\u9690\u85cf",value:0}],filterMultiple:!1,render:function(e){return 1===e?M.default.createElement(g.default,{color:"#87d068"},"\u663e\u793a"):M.default.createElement(g.default,{color:"#f50"},"\u9690\u85cf")}},{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"created_at",sorter:!0,align:"left"},{title:"\u64cd\u4f5c",render:function(e,a){return M.default.createElement(M.Fragment,null,M.default.createElement("a",{onClick:function(e){e.preventDefault(),t.showEditModal(a)}},"\u7f16\u8f91"),M.default.createElement(v.default,{type:"vertical"}),M.default.createElement("a",{style:{color:"#c92c2c"},onClick:function(e){e.preventDefault(),t.deleteItem(a)}},"\u5220\u9664"))}}],t.showModal=function(){t.setState({visible:!0,current:void 0,isEdit:!1,imageUrl:void 0})},t.showEditModal=function(e){t.setState({visible:!0,current:e,imageUrl:e.image,isEdit:!0})},t.handleCancel=function(){t.setState({visible:!1})},t.handleSubmit=function(e){e.preventDefault();var a=t.props,l=a.dispatch,r=a.form,n=t.state,d=n.current,u=n.imageUrl,i=d?d.id:void 0;t.setState({visible:!1}),r.setFieldsValue({image:u}),r.validateFields(function(e,a){e||l({type:"api/submit",payload:{apiname:"image/banner",id:i,params:(0,h.default)({},a)},callback:function(e){return 1001===e.code?p.default.success(e.message):p.default.error(e.message)}})})},t.deleteItem=function(e){var a=t.props.dispatch;m.default.confirm({title:"\u5220\u9664",content:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6761\u5417",onOk:function(){a({type:"api/submit",payload:{apiname:"image/banner",id:e.id},callback:function(e){return 1001===e.code?p.default.success(e.message):p.default.error(e.message)}})}})},t.onSearch=function(e){var a=t.props.dispatch,l=t.state,r=l.search,n=l.params,d=(0,h.default)({},r,{name:e}),u=(0,h.default)({},n,{search:(0,V.getSearchParams)(d)});a({type:"api/fetch",payload:{apiname:"image/banner",params:u}})},t.beforeUpload=function(e){var a="image/jpeg"===e.type;a||p.default.error("You can only upload JPG file!");var t=e.size/1024/1024<2;return t||p.default.error("Image must smaller than 2MB!"),a&&t},t.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&t.setState({imageUrl:e.fileList[0].response.data.url,uploading:!1}):t.setState({uploading:!0})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleStandardTableChange=function(e,a,l){var r=t.props.dispatch,n=t.state,d=n.search,u=n.params,i=(0,h.default)({},u,{page:e.current,limit:e.pageSize,searchJoin:"or"}),s=(0,h.default)({},d),o=l.field,c=l.order;void 0!==o&&void 0!==c&&(i=(0,h.default)({},i,{orderBy:o,sortedBy:"descend"===c?"desc":"asc"}));var f=a.type,m=a.status;void 0!==f&&(s=(0,h.default)({},s,{type:f[0]})),void 0!==m&&(s=(0,h.default)({},s,{status:m[0]})),i=(0,h.default)({},i,{search:(0,V.getSearchParams)(s)}),t.setState({params:i,search:s}),r({type:"api/fetch",payload:{apiname:"image/banner",params:i}})},t}return(0,k.default)(a,e),(0,b.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,a=this.state.params;e({type:"api/fetch",payload:{apiname:"image/banner",params:a}})}},{key:"render",value:function(){var e=this,a=this.props,t=a.api,l=a.loading,r=this.props.form.getFieldDecorator,p=this.state,h=p.selectedRows,v=p.visible,g=p.isEdit,y=p.current,E=void 0===y?{}:y,b=M.default.createElement(f.default,{onClick:this.handleMenuClick,selectedKeys:[]},M.default.createElement(f.default.Item,{key:"remove"},"\u5220\u9664"),M.default.createElement(f.default.Item,{key:"approval"},"\u6279\u91cf\u5ba1\u6279")),S={okText:"\u63d0\u4ea4",onOk:this.handleSubmit,onCancel:this.handleCancel},w=(M.default.createElement("div",null,M.default.createElement(D,{className:F.default.extraContentSearch,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd\u641c\u7d22",onSearch:this.onSearch})),function(){var a=e.state,t=a.imageUrl,l=a.uploading,n=M.default.createElement("div",null,M.default.createElement(c.default,{type:l?"loading":"plus"}),M.default.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20"));return M.default.createElement(N.default,{onSubmit:e.handleSubmit},M.default.createElement(z,(0,s.default)({label:"\u6392\u5e8f"},e.formLayout),r("sort",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6392\u5e8f"}],initialValue:E.sort?E.sort:100})(M.default.createElement(o.default,{min:1,max:1e5}))),M.default.createElement(z,(0,s.default)({label:"\u6807\u8bc6"},e.formLayout),r("tag",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}],initialValue:E.tag})(M.default.createElement(C.default,{style:{width:"100%"}},M.default.createElement(G,{key:"banner"},"banner"),M.default.createElement(G,{key:"category"},"category")))),M.default.createElement(z,(0,s.default)({label:"\u72b6\u6001"},e.formLayout),r("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u56fe\u7247\u72b6\u6001"}],initialValue:E.status?E.status:1})(M.default.createElement(B,{name:"status"},M.default.createElement(L.default,{value:1},"\u663e\u793a"),M.default.createElement(L.default,{value:0},"\u9690\u85cf")))),M.default.createElement(z,(0,s.default)({label:"\u56fe\u7247"},e.formLayout),r("image",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u56fe\u7247"}],initialValue:E.image})(M.default.createElement(i.default,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"//lv5.vaiwan.com:8081/api/admin/image/file/upload",beforeUpload:e.beforeUpload,onChange:e.handleChange},t?M.default.createElement("img",{src:t,alt:"avatar",style:{width:100,height:100},className:"thumb"}):n))))});return M.default.createElement(K.default,null,M.default.createElement("div",{className:F.default.standardList},M.default.createElement(n.default,{bordered:!1,title:"\u56fe\u7247\u5217\u8868",style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"}},M.default.createElement("div",{className:F.default.tableList},M.default.createElement("div",{className:F.default.tableListOperator},h.length>0&&M.default.createElement("span",null,M.default.createElement(u.default,null,"\u6279\u91cf\u64cd\u4f5c"),M.default.createElement(d.default,{overlay:b},M.default.createElement(u.default,null,"\u66f4\u591a\u64cd\u4f5c ",M.default.createElement(c.default,{type:"down"}))))),M.default.createElement(u.default,{type:"dashed",style:{width:"100%",marginBottom:8,marginTop:8},icon:"plus",onClick:this.showModal},"\u6dfb\u52a0"),M.default.createElement(T.default,{selectedRows:h,loading:l,data:t,rowKey:"id",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))),M.default.createElement(m.default,(0,s.default)({title:g?"\u7f16\u8f91\u56fe\u7247":"\u6dfb\u52a0\u56fe\u7247",className:F.default.standardListForm,width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,visible:v},S),w()))}}]),a}(M.PureComponent))||I)||I),P=J;a.default=P}}]);